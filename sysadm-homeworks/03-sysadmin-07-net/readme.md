# Домашнее задание к занятию "3.7. Компьютерные сети, лекция 2"

> 1. Проверьте список доступных сетевых интерфейсов на вашем компьютере. Какие команды есть для этого в Linux и в Windows?

Linux: 

    vagrant@netology1:~$ ip link
    1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN mode DEFAULT group default qlen 1000
        link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    2: eth0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc fq_codel state UP mode DEFAULT group default qlen 1000
        link/ether 08:00:27:a2:6b:fd brd ff:ff:ff:ff:ff:ff
    3: eth1: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc fq_codel state UP mode DEFAULT group default qlen 1000
        link/ether 08:00:27:d1:7f:d5 brd ff:ff:ff:ff:ff:ff

Windows: 

    PS E:\Netologia\HomeWork>  netsh interface show interface
    
    Состояние адм.  Состояние     Тип              Имя интерфейса
    ---------------------------------------------------------------------
    Запрещен       Отключен       Выделенный       Ethernet 2
    Разрешен       Подключен      Выделенный       VirtualBox Host-Only Network
    Разрешен       Подключен      Выделенный       Ethernet


> 2. Какой протокол используется для распознавания соседа по сетевому интерфейсу? Какой пакет и команды есть в Linux для этого?

Используется протокол LLDP. 

    vagrant@vagrant:~$ sudo lldpctl
    -------------------------------------------------------------------------------
    LLDP neighbors:
    -------------------------------------------------------------------------------

> 3. Какая технология используется для разделения L2 коммутатора на несколько виртуальных сетей? Какой пакет и команды есть в Linux для этого? Приведите пример конфига.

Используется технология виртуальных сетей VLAN. В Linux применяется пакет vlan.

Пример конфигурации:

    DEVICE=eth0.5
    BOOTPROTO=none
    ONBOOT=yes
    IPADDR=192.168.1.5
    NETMASK=255.255.255.0
    USERCTL=no
    NETWORK=192.168.1.0
    VLAN=yes

> 4. Какие типы агрегации интерфейсов есть в Linux? Какие опции есть для балансировки нагрузки? Приведите пример конфига.

Агрегация интерфейсов бывает LAG (ручная) и LACP (динамическая.)

Для балансировки используются опции:

0 - balance-rr - (round-robin) - Режим по умолчанию, обеспечивается балансировку нагрузки и отказоустойчивость;

1 - active-backup - Активен только один интерфейс, остальные в режиме горячей замены;

2 - balance-xor - Передача пакетов распределяется по типу входящего и исходящего трафика по определенной формуле;

3 - broadcast - Трафик идет через все интерфейсы одновременно;

4 - 802.3ad - (dynamic link aggregation) - Динамическое объединение одинаковых портов;

5 - balance-tlb - (adaptive transmit load balancing) - Исходящий трафик распределяется в соответствии с текущей нагрузкой на интерфейсах;

6 - balance-alb - (adaptive load balancing) - Включает в себя balance-tlb, плюс балансировку на приём (rlb).

Пример кофигурации:

    auto bond0
    iface bond0 inet static
    address 192.168.0.12
    netmask 255.255.255.0
    gateway 192.168.0.1
    dns-nameservers 192.168.0.1
    dns-search domain.local
    slaves eth0 eth1
    bond_mode 0
    bond-miimon 100
    bond_downdelay 200
    bond_updelay 200

> 5. Сколько IP адресов в сети с маской /29 ? Сколько /29 подсетей можно получить из сети с маской /24. Приведите несколько примеров /29 подсетей внутри сети 10.10.10.0/24.

В сети с маской /29 восемь адресов.

Из сети с маской /24 можно получить 256/8=32 подсети.

Примеры сетей /29 внутри 10.10.10.0/24:

    10.10.10.18
    10.10.10.88
    10.10.10.138
    10.10.10.248

> 6. Задача: вас попросили организовать стык между 2-мя организациями. Диапазоны 10.0.0.0/8, 172.16.0.0/12, 192.168.0.0/16 уже заняты. Из какой подсети допустимо взять частные IP адреса? Маску выберите из расчета максимум 40-50 хостов внутри подсети.

Учитывая, что в сети предполагается 40-50 хостов, то минимальный диапазон - /26. Можно выбрать сети 100.64.0.0/26

> 7. Как проверить ARP таблицу в Linux, Windows? Как очистить ARP кеш полностью? Как из ARP таблицы удалить только один нужный IP?

Проверка таблицы в Linux и Windows выполняется командой arp:

Linux:

    vagrant@vagrant:~$ arp -n
    Address                  HWtype  HWaddress           Flags Mask            Iface
    10.0.2.2                 ether   52:54:00:12:35:02   C                     eth0
    10.0.2.3                 ether   52:54:00:12:35:03   C                     eth0

Windows:

    PS E:\Netologia\HomeWork> arp -a
    
    Интерфейс: 192.168.1.85 --- 0x4
      адрес в Интернете      Физический адрес      Тип
      192.168.1.1           50-ff-20-78-d1-12     динамический
      192.168.1.111         64-cb-e9-50-16-26     динамический
      192.168.1.255         ff-ff-ff-ff-ff-ff     статический
      224.0.0.2             01-00-5e-00-00-02     статический
      224.0.0.22            01-00-5e-00-00-16     статический
      224.0.0.251           01-00-5e-00-00-fb     статический
      224.0.0.252           01-00-5e-00-00-fc     статический
      239.255.255.250       01-00-5e-7f-ff-fa     статический
      255.255.255.255       ff-ff-ff-ff-ff-ff     статический
    
    Интерфейс: 192.168.56.1 --- 0x6
      адрес в Интернете      Физический адрес      Тип
      192.168.56.255        ff-ff-ff-ff-ff-ff     статический
      224.0.0.2             01-00-5e-00-00-02     статический
      224.0.0.22            01-00-5e-00-00-16     статический
      224.0.0.251           01-00-5e-00-00-fb     статический
      224.0.0.252           01-00-5e-00-00-fc     статический
      239.255.255.250       01-00-5e-7f-ff-fa     статический

Очистка таблицы:

linux:

    vagrant@vagrant:~$ sudo ip neigh flush all
    vagrant@vagrant:~$ arp -n
    Address                  HWtype  HWaddress           Flags Mask            Iface
    10.0.2.2                 ether   52:54:00:12:35:02   C                     eth0

Windows:

    PS C:\Windows\system32> netsh interface IP delete arpcache
    ОК.
    
    PS C:\Windows\system32> arp -a
    
    Интерфейс: 192.168.1.85 --- 0x4
      адрес в Интернете      Физический адрес      Тип
      192.168.1.1           50-ff-20-78-d1-12     динамический
